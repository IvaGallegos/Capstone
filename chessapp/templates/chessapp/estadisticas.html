<!doctype html>
<html>
<head>
{% load static %}
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

    <script type="text/javascript" src="{% static 'chessapp/accesibilidad.js' %}"></script>
	<script type="text/javascript" src="{% static 'chessapp/xhr.js' %}"></script>
    <script type="text/javascript" src="{% static 'chessapp/chess.js' %}"></script>
    <link type="text/css" rel="stylesheet" href="{% static 'chessapp/chess.css' %}" />
    <link type="text/css" rel="stylesheet" href="{% static 'chessapp/gnomechess.css' %}" />
	
	<link rel="stylesheet" href="{% static 'chessapp/styles.css' %}"> 
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <title>Estadísticas - Ajedrez App</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.css" />
    <style>

        
        .opening-list {
            margin-top: 20px;
        }
        #board {
            width: 400px;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <div class="navbar-accesibilidad">
        <button class="btn-accesibilidad" onclick="cambiarTamanoFuente('aumentar')">Aumentar Fuente</button>
        <button class="btn-accesibilidad" onclick="cambiarTamanoFuente('disminuir')">Disminuir Fuente</button>
        <button class="btn-accesibilidad" onclick="toggleAltoContraste()">♞ Alto Contraste</button>
        <a class="btn-accesibilidad" href="{% url 'menu' %}">☰ Menú</a>
    </div>
    
    <style>
        .navbar-accesibilidad {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 10px;
        }
    
        .btn-accesibilidad {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 14px;
            border-radius: 4px;
        }
    
        .btn-accesibilidad:hover {
            background-color: #0056b3;
        }
    </style>
    
    <div class="container my-5">
        <h1 class="text-center">Aperturas de Ajedrez</h1>
        
        <!-- Tablero de Ajedrez -->
        <div id="board" class="chessboard"></div>

        <div class="opening-list" id="opening-list">
            <!-- Las aperturas se cargarán aquí -->
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chess.js"></script>

    <body onload="initChess();">
        <h1>Tablero Ajedrez</h1>
        <div class="navbar-accesibilidad">
            <button class="btn-accesibilidad" onclick="cambiarTamanoFuente('aumentar')">Aumentar Fuente</button>
            <button class="btn-accesibilidad" onclick="cambiarTamanoFuente('disminuir')">Disminuir Fuente</button>
            <button class="btn-accesibilidad" onclick="toggleAltoContraste()">♞ Alto Contraste</button>
            <a class="btn-accesibilidad" href="{% url 'menu' %}">☰ Menú</a>
        </div>
    
    <script type="text/javascript">
        // Función para cambiar el tamaño de la fuente
        function cambiarTamanoFuente(accion) {
            const body = document.body;
            const currentFontSize = window.getComputedStyle(body, null).getPropertyValue('font-size');
            const currentSize = parseFloat(currentFontSize);
    
            if (accion === 'aumentar') {
                body.style.fontSize = (currentSize + 2) + 'px';
            } else if (accion === 'disminuir') {
                body.style.fontSize = (currentSize - 2) + 'px';
            }
        }
    
        // Función para alternar el alto contraste
        function toggleAltoContraste() {
            const html = document.documentElement; // Selecciona el elemento <html>
            html.classList.toggle("modo-gris"); // Activa o desactiva la clase de escala de grises
        }
    </script>
    
    <script>
        // Inicializa el tablero de ajedrez
        const board = Chessboard('board', {
            draggable: true,
            position: 'start'
        });

        // Cambia la ruta al archivo JSON según la estructura de tu proyecto
        fetch('{% static "chessapp/aperturas.json" %}')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok ' + response.statusText);
                }
                return response.json();
            })
            .then(data => {
                const openingList = document.getElementById('opening-list');
                const list = document.createElement('ul');

                // Cambia esta línea para usar la propiedad correcta del JSON
                data.forEach(opening => {
                    const listItem = document.createElement('li');
                    listItem.innerText = `Apertura: ${opening.name} - ECO: ${opening.eco}`;

                    // Añadir un botón para cargar la apertura en el tablero
                    const loadButton = document.createElement('button');
                    loadButton.innerText = 'Cargar';
                    loadButton.className = 'btn btn-primary btn-sm ml-2';
                    loadButton.onclick = () => {
                        board.position(opening.pgn); // Asumiendo que 'pgn' es la notación de la apertura
                    };

                    listItem.appendChild(loadButton);
                    list.appendChild(listItem);
                });

                openingList.appendChild(list);
            })
            .catch(error => console.error('Error al cargar el archivo JSON:', error));
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>




